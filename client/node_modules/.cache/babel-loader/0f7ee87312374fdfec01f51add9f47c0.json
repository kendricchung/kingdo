{"ast":null,"code":"var _jsxFileName = \"/Users/kendric_chung/Projects/kingdo/src/Components/Checkout/OrderConfirmationPage.js\";\nimport React, { Component } from \"react\";\nimport TopBar from \"../Menu/MenuPage/TopBar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport PhoneInput from \"material-ui-phone-number\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Center from \"react-center\";\nimport Axios from \"axios\";\nimport { Helmet } from \"react-helmet\";\nimport { parseItemIntoStack } from \"../Cart/CartPage\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport buttonBackground from \"../kingdo_background.png\";\nconst hostEndpoint = process.env.KINGDO_HOST_ENDPOINT ? process.env.KINGDO_HOST_ENDPOINT : \"http://localhost:3001\";\n\nclass OrderConfirmationPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleFirstNameEdit = event => {\n      this.setState({\n        firstNameText: event.target.value,\n        disabled: event.target.value.length === 0 || this.state.lastNameText.length === 0 || this.state.phoneNumber.length === 0 || this.state.foodTransportationMethod === \"delivery\" ? this.state.deliveryAddress.length === 0 : false\n      });\n    };\n\n    this.handleLastNameEdit = event => {\n      this.setState({\n        lastNameText: event.target.value,\n        disabled: event.target.value.length === 0 || this.state.firstNameText.length === 0 || this.state.phoneNumber.length === 0 || this.state.foodTransportationMethod === \"delivery\" ? this.state.deliveryAddress.length === 0 : false\n      });\n    };\n\n    this.handleDeliveryAddressEdit = event => {\n      this.setState({\n        deliveryAddress: event.target.value,\n        disabled: event.target.value.length === 0 || this.state.firstNameText.length === 0 || this.state.phoneNumber.length === 0 || this.state.lastNameText.length === 0\n      });\n    };\n\n    this.handlePhoneNumberEdit = value => {\n      this.setState({\n        phoneNumber: value.replace(/\\(|\\)|-|\\s/g, \"\"),\n        disabled: value.length === 0 || this.state.lastNameText.length === 0 || this.state.firstNameText.length === 0 || this.state.foodTransportationMethod === \"delivery\" ? this.state.deliveryAddress.length === 0 : false\n      });\n    };\n\n    this.handleRedirectToPlaceOrderConfirmPage = () => {\n      try {\n        const [stackItems, cartItemsAmount] = parseItemIntoStack(JSON.parse(sessionStorage.getItem(\"cartItems\")));\n        Axios(`${hostEndpoint}/twilio/sms`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Access-Control-Allow-Origin\": \"*\"\n          },\n          params: {\n            customerPhoneNumber: this.state.phoneNumber,\n            firstName: this.state.firstNameText,\n            lastName: this.state.lastNameText,\n            transportationMethod: this.state.foodTransportationMethod,\n            deliveryAddress: this.state.deliveryAddress\n          },\n          data: {\n            stackItems,\n            cartItemsAmount\n          }\n        }).then(response => sessionStorage.removeItem(\"cartItems\")); // TODO: need to check if number of valid if not show that they need to pick up on next screen\n      } catch (error) {\n        console.log(error);\n      }\n\n      this.setState({\n        redirectToPlaceOrderConfirmPage: true\n      });\n    };\n\n    this.handleFoodTransportationMethodChange = event => {\n      this.setState({\n        foodTransportationMethod: event.target.value\n      });\n    };\n\n    this.state = {\n      firstNameText: \"\",\n      lastNameText: \"\",\n      phoneNumber: \"\",\n      deliveryAddress: \"\",\n      token: props.location.state,\n      foodTransportationMethod: props.location.pathname.includes(\"delivery\") ? \"delivery\" : \"pickup\",\n      disabled: true,\n      redirectToPlaceOrderConfirmPage: false\n    };\n  }\n\n  render() {\n    if (!this.state.token) {\n      return /*#__PURE__*/React.createElement(Center, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 11\n        }\n      }, \"Please return to the main page \", /*#__PURE__*/React.createElement(Link, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 44\n        }\n      }, \"here\"), \".\"));\n    }\n\n    if (this.state.redirectToPlaceOrderConfirmPage) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: `/${this.state.foodTransportationMethod}/cart/order/confirmed/checkout`,\n          state: \"token\",\n          phoneNumber: this.state.phoneNumber\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 9\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Helmet, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"title\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 11\n      }\n    }, \"King Do Restaurant | Order Confirm\")), /*#__PURE__*/React.createElement(TopBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: \"2%\",\n        paddingRight: \"5%\",\n        paddingLeft: \"5%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: \"2%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }\n    }, \"Please fill in the following to confirm that you will be paying for your order.\"), /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 20,\n        paddingBottom: \"2%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, \"Your payment will be received upon\", this.state.foodTransportationMethod === \"deliver\" ? \" delivery\" : \" pick up\", \".\"), /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 20,\n        paddingBottom: \"1%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }\n    }, \"You can still change between delivery and pick up here:\"), /*#__PURE__*/React.createElement(FormControl, {\n      variant: \"outlined\",\n      style: {\n        width: \"25%\",\n        paddingBottom: \"2%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Select, {\n      labelId: \"demo-simple-select-outlined-label\",\n      id: \"demo-simple-select-outlined\",\n      value: this.state.foodTransportationMethod,\n      onChange: event => this.handleFoodTransportationMethodChange(event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      value: \"delivery\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }\n    }, \"Delivery\"), /*#__PURE__*/React.createElement(MenuItem, {\n      value: \"pickup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 21\n      }\n    }, \"Pick Up\"))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: \"100%\",\n        height: 1,\n        backgroundColor: \"black\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 20,\n        paddingTop: \"2%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }, \"First Name\"), /*#__PURE__*/React.createElement(TextField, {\n      fullWidth: true,\n      autoFocus: true,\n      autoComplete: true,\n      variant: \"outlined\",\n      style: {\n        paddingBottom: 10\n      },\n      onChange: this.handleFirstNameEdit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 17\n      }\n    }, \"Last Name\"), /*#__PURE__*/React.createElement(TextField, {\n      fullWidth: true,\n      autoComplete: true,\n      variant: \"outlined\",\n      style: {\n        paddingBottom: 10\n      },\n      onChange: this.handleLastNameEdit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }, \"Phone Number\"), /*#__PURE__*/React.createElement(PhoneInput, {\n      fullWidth: true,\n      autoComplete: true,\n      style: {\n        height: \"40px\",\n        paddingTop: \"5px\"\n      },\n      onChange: this.handlePhoneNumberEdit,\n      defaultCountry: \"ca\",\n      disableDropdown: \"true\",\n      countryCodeEditable: \"false\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 17\n      }\n    }), this.state.foodTransportationMethod === \"delivery\" ? /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 19\n      }\n    }, \"Delivery Address\") : \"\", this.state.foodTransportationMethod === \"delivery\" ? /*#__PURE__*/React.createElement(TextField, {\n      fullWidth: true,\n      autoComplete: true,\n      variant: \"outlined\",\n      style: {\n        paddingBottom: 10\n      },\n      onChange: this.handleDeliveryAddressEdit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 19\n      }\n    }) : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: \"2%\",\n        paddingRight: \"10%\",\n        paddingLeft: \"10%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      fullWidth: true,\n      disabled: this.state.disabled,\n      onClick: this.handleRedirectToPlaceOrderConfirmPage,\n      variant: \"contained\",\n      style: {\n        padding: \"2%\",\n        fontSize: 25,\n        color: \"black\",\n        backgroundImage: `url(${buttonBackground})`,\n        filter: this.state.disabled ? \"grayscale(100%)\" : \"grayscale(0%)\",\n        borderWidth: 2,\n        borderColor: \"black\",\n        borderStyle: \"solid\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 17\n      }\n    }, \"Place Order\"))))));\n  }\n\n}\n\nexport default OrderConfirmationPage;","map":{"version":3,"sources":["/Users/kendric_chung/Projects/kingdo/src/Components/Checkout/OrderConfirmationPage.js"],"names":["React","Component","TopBar","Typography","TextField","Button","PhoneInput","Redirect","Link","Card","CardContent","Center","Axios","Helmet","parseItemIntoStack","MenuItem","FormControl","Select","buttonBackground","hostEndpoint","process","env","KINGDO_HOST_ENDPOINT","OrderConfirmationPage","constructor","props","handleFirstNameEdit","event","setState","firstNameText","target","value","disabled","length","state","lastNameText","phoneNumber","foodTransportationMethod","deliveryAddress","handleLastNameEdit","handleDeliveryAddressEdit","handlePhoneNumberEdit","replace","handleRedirectToPlaceOrderConfirmPage","stackItems","cartItemsAmount","JSON","parse","sessionStorage","getItem","method","headers","params","customerPhoneNumber","firstName","lastName","transportationMethod","data","then","response","removeItem","error","console","log","redirectToPlaceOrderConfirmPage","handleFoodTransportationMethodChange","token","location","pathname","includes","render","padding","paddingRight","paddingLeft","fontSize","paddingBottom","width","height","backgroundColor","paddingTop","color","backgroundImage","filter","borderWidth","borderColor","borderStyle"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport TopBar from \"../Menu/MenuPage/TopBar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport PhoneInput from \"material-ui-phone-number\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Center from \"react-center\";\nimport Axios from \"axios\";\nimport { Helmet } from \"react-helmet\";\nimport { parseItemIntoStack } from \"../Cart/CartPage\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport buttonBackground from \"../kingdo_background.png\";\n\nconst hostEndpoint = process.env.KINGDO_HOST_ENDPOINT\n  ? process.env.KINGDO_HOST_ENDPOINT\n  : \"http://localhost:3001\";\n\nclass OrderConfirmationPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      firstNameText: \"\",\n      lastNameText: \"\",\n      phoneNumber: \"\",\n      deliveryAddress: \"\",\n      token: props.location.state,\n      foodTransportationMethod: props.location.pathname.includes(\"delivery\")\n        ? \"delivery\"\n        : \"pickup\",\n      disabled: true,\n      redirectToPlaceOrderConfirmPage: false,\n    };\n  }\n\n  handleFirstNameEdit = (event) => {\n    this.setState({\n      firstNameText: event.target.value,\n      disabled:\n        event.target.value.length === 0 ||\n        this.state.lastNameText.length === 0 ||\n        this.state.phoneNumber.length === 0 ||\n        this.state.foodTransportationMethod === \"delivery\"\n          ? this.state.deliveryAddress.length === 0\n          : false,\n    });\n  };\n\n  handleLastNameEdit = (event) => {\n    this.setState({\n      lastNameText: event.target.value,\n      disabled:\n        event.target.value.length === 0 ||\n        this.state.firstNameText.length === 0 ||\n        this.state.phoneNumber.length === 0 ||\n        this.state.foodTransportationMethod === \"delivery\"\n          ? this.state.deliveryAddress.length === 0\n          : false,\n    });\n  };\n\n  handleDeliveryAddressEdit = (event) => {\n    this.setState({\n      deliveryAddress: event.target.value,\n      disabled:\n        event.target.value.length === 0 ||\n        this.state.firstNameText.length === 0 ||\n        this.state.phoneNumber.length === 0 ||\n        this.state.lastNameText.length === 0,\n    });\n  };\n\n  handlePhoneNumberEdit = (value) => {\n    this.setState({\n      phoneNumber: value.replace(/\\(|\\)|-|\\s/g, \"\"),\n      disabled:\n        value.length === 0 ||\n        this.state.lastNameText.length === 0 ||\n        this.state.firstNameText.length === 0 ||\n        this.state.foodTransportationMethod === \"delivery\"\n          ? this.state.deliveryAddress.length === 0\n          : false,\n    });\n  };\n\n  handleRedirectToPlaceOrderConfirmPage = () => {\n    try {\n      const [stackItems, cartItemsAmount] = parseItemIntoStack(\n        JSON.parse(sessionStorage.getItem(\"cartItems\"))\n      );\n      Axios(`${hostEndpoint}/twilio/sms`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n        },\n        params: {\n          customerPhoneNumber: this.state.phoneNumber,\n          firstName: this.state.firstNameText,\n          lastName: this.state.lastNameText,\n          transportationMethod: this.state.foodTransportationMethod,\n          deliveryAddress: this.state.deliveryAddress,\n        },\n        data: { stackItems, cartItemsAmount },\n      }).then((response) => sessionStorage.removeItem(\"cartItems\"));\n      // TODO: need to check if number of valid if not show that they need to pick up on next screen\n    } catch (error) {\n      console.log(error);\n    }\n    this.setState({ redirectToPlaceOrderConfirmPage: true });\n  };\n\n  handleFoodTransportationMethodChange = (event) => {\n    this.setState({ foodTransportationMethod: event.target.value });\n  };\n\n  render() {\n    if (!this.state.token) {\n      return (\n        <Center>\n          <h1>\n            Please return to the main page <Link to=\"/\">here</Link>.\n          </h1>\n        </Center>\n      );\n    }\n\n    if (this.state.redirectToPlaceOrderConfirmPage) {\n      return (\n        <Redirect\n          to={{\n            pathname: `/${this.state.foodTransportationMethod}/cart/order/confirmed/checkout`,\n            state: \"token\",\n            phoneNumber: this.state.phoneNumber,\n          }}\n        />\n      );\n    }\n\n    return (\n      <div>\n        <Helmet>\n          <title>King Do Restaurant | Order Confirm</title>\n        </Helmet>\n        <TopBar />\n        <div style={{ padding: \"2%\", paddingRight: \"5%\", paddingLeft: \"5%\" }}>\n          <Card>\n            <CardContent>\n              <div\n                style={{\n                  padding: \"2%\",\n                }}\n              >\n                <Typography component=\"h2\" style={{ fontSize: 20 }}>\n                  Please fill in the following to confirm that you will be\n                  paying for your order.\n                </Typography>\n                <Typography\n                  component=\"h2\"\n                  style={{ fontSize: 20, paddingBottom: \"2%\" }}\n                >\n                  Your payment will be received upon\n                  {this.state.foodTransportationMethod === \"deliver\"\n                    ? \" delivery\"\n                    : \" pick up\"}\n                  .\n                </Typography>\n                <Typography\n                  component=\"h2\"\n                  style={{ fontSize: 20, paddingBottom: \"1%\" }}\n                >\n                  You can still change between delivery and pick up here:\n                </Typography>\n                <FormControl\n                  variant=\"outlined\"\n                  style={{ width: \"25%\", paddingBottom: \"2%\" }}\n                >\n                  <Select\n                    labelId=\"demo-simple-select-outlined-label\"\n                    id=\"demo-simple-select-outlined\"\n                    value={this.state.foodTransportationMethod}\n                    onChange={(event) =>\n                      this.handleFoodTransportationMethodChange(event)\n                    }\n                  >\n                    <MenuItem value={\"delivery\"}>Delivery</MenuItem>\n                    <MenuItem value={\"pickup\"}>Pick Up</MenuItem>\n                  </Select>\n                </FormControl>\n                <div\n                  style={{ width: \"100%\", height: 1, backgroundColor: \"black\" }}\n                ></div>\n                <Typography\n                  component=\"h2\"\n                  style={{ fontSize: 20, paddingTop: \"2%\" }}\n                >\n                  First Name\n                </Typography>\n                <TextField\n                  fullWidth\n                  autoFocus\n                  autoComplete\n                  variant=\"outlined\"\n                  style={{ paddingBottom: 10 }}\n                  onChange={this.handleFirstNameEdit}\n                />\n                <Typography component=\"h2\" style={{ fontSize: 20 }}>\n                  Last Name\n                </Typography>\n                <TextField\n                  fullWidth\n                  autoComplete\n                  variant=\"outlined\"\n                  style={{ paddingBottom: 10 }}\n                  onChange={this.handleLastNameEdit}\n                />\n                <Typography component=\"h2\" style={{ fontSize: 20 }}>\n                  Phone Number\n                </Typography>\n                <PhoneInput\n                  fullWidth\n                  autoComplete\n                  style={{ height: \"40px\", paddingTop: \"5px\" }}\n                  onChange={this.handlePhoneNumberEdit}\n                  defaultCountry=\"ca\"\n                  disableDropdown=\"true\"\n                  countryCodeEditable=\"false\"\n                />\n                {/* TODO: split by city name, street, and postal code */}\n                {this.state.foodTransportationMethod === \"delivery\" ? (\n                  <Typography component=\"h2\" style={{ fontSize: 20 }}>\n                    Delivery Address\n                  </Typography>\n                ) : (\n                  \"\"\n                )}\n                {this.state.foodTransportationMethod === \"delivery\" ? (\n                  <TextField\n                    fullWidth\n                    autoComplete\n                    variant=\"outlined\"\n                    style={{ paddingBottom: 10 }}\n                    onChange={this.handleDeliveryAddressEdit}\n                  />\n                ) : (\n                  \"\"\n                )}\n              </div>\n              <div\n                style={{\n                  padding: \"2%\",\n                  paddingRight: \"10%\",\n                  paddingLeft: \"10%\",\n                }}\n              >\n                <Button\n                  fullWidth\n                  disabled={this.state.disabled}\n                  onClick={this.handleRedirectToPlaceOrderConfirmPage}\n                  variant=\"contained\"\n                  style={{\n                    padding: \"2%\",\n                    fontSize: 25,\n                    color: \"black\",\n                    backgroundImage: `url(${buttonBackground})`,\n                    filter: this.state.disabled\n                      ? \"grayscale(100%)\"\n                      : \"grayscale(0%)\",\n                    borderWidth: 2,\n                    borderColor: \"black\",\n                    borderStyle: \"solid\",\n                  }}\n                >\n                  Place Order\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default OrderConfirmationPage;\n"]},"metadata":{},"sourceType":"module"}