{"ast":null,"code":"var _jsxFileName = \"/Users/kendric_chung/Projects/kingdo/src/Components/Checkout/OrderConfirmationPage.js\";\nimport React, { Component } from \"react\";\nimport TopBar from \"../Menu/MenuPage/TopBar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport PhoneInput from \"material-ui-phone-number\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Center from \"react-center\";\nimport Axios from \"axios\";\nimport { Helmet } from \"react-helmet\";\nconst hostEndpoint = process.env.KINGDO_HOST_ENDPOINT ? process.env.KINGDO_HOST_ENDPOINT : \"http://localhost:3001\";\n\nclass OrderConfirmationPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleFirstNameEdit = event => {\n      this.setState({\n        firstNameText: event.target.value,\n        disabled: event.target.value.length === 0 || this.state.lastNameText.length === 0 || this.state.phoneNumber.length === 0\n      });\n    };\n\n    this.handleLastNameEdit = event => {\n      this.setState({\n        lastNameText: event.target.value,\n        disabled: event.target.value.length === 0 || this.state.firstNameText.length === 0 || this.state.phoneNumber.length === 0\n      });\n    };\n\n    this.handlePhoneNumberEdit = value => {\n      this.setState({\n        phoneNumber: value.replace(/\\(|\\)|-|\\s/g, \"\"),\n        disabled: value.length === 0 || this.state.lastNameText.length === 0 || this.state.firstNameText.length === 0\n      });\n    };\n\n    this.handleRedirectToPlaceOrderConfirmPage = () => {\n      try {\n        Axios(`${hostEndpoint}/twilio/sms`, {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"Access-Control-Allow-Origin\": \"*\"\n          },\n          params: {\n            customerPhoneNumber: this.state.phoneNumber\n          },\n          data: {\n            cartItems: JSON.parse(sessionStorage.getItem(\"cartItems\"))\n          }\n        }).then(response => sessionStorage.removeItem(\"cartItems\")); // TODO: need to check if number of valid if not show that they need to pick up on next screen\n      } catch (error) {\n        console.log(error);\n      }\n\n      this.setState({\n        redirectToPlaceOrderConfirmPage: true\n      });\n    };\n\n    this.state = {\n      firstNameText: \"\",\n      lastNameText: \"\",\n      phoneNumber: \"\",\n      token: props.location.state,\n      foodTransportationMethod: props.location.foodTransportationMethod,\n      disabled: true,\n      redirectToPlaceOrderConfirmPage: false\n    };\n  }\n\n  render() {\n    if (!this.state.token) {\n      return /*#__PURE__*/React.createElement(Center, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }\n      }, \"Please return to the main page \", /*#__PURE__*/React.createElement(Link, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 44\n        }\n      }, \"here\"), \".\"));\n    }\n\n    if (this.state.redirectToPlaceOrderConfirmPage) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: {\n          pathname: `/${this.state.foodTransportationMethod}/cart/order/confirmed/checkout`,\n          state: \"token\",\n          phoneNumber: this.state.phoneNumber\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Helmet, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"title\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }\n    }, \"King Do Restaurant | Order Confirm\")), /*#__PURE__*/React.createElement(TopBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: \"2%\",\n        paddingRight: \"5%\",\n        paddingLeft: \"5%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: \"2%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 17\n      }\n    }, \"Please fill in the following to confirm that you will be picking up the order.\"), /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 20,\n        paddingBottom: \"2%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }\n    }, \"Your payment will be received upon pick up.\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: \"100%\",\n        height: 1,\n        backgroundColor: \"black\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 20,\n        paddingTop: \"2%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }\n    }, \"First Name\"), /*#__PURE__*/React.createElement(TextField, {\n      fullWidth: true,\n      variant: \"outlined\",\n      style: {\n        paddingBottom: 10\n      },\n      onChange: this.handleFirstNameEdit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }\n    }, \"Last Name\"), /*#__PURE__*/React.createElement(TextField, {\n      fullWidth: true,\n      variant: \"outlined\",\n      style: {\n        paddingBottom: 10\n      },\n      onChange: this.handleLastNameEdit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, \"Phone Number\"), /*#__PURE__*/React.createElement(PhoneInput, {\n      fullWidth: true,\n      style: {\n        height: \"40px\",\n        paddingTop: \"5px\"\n      },\n      onChange: this.handlePhoneNumberEdit,\n      defaultCountry: \"ca\",\n      disableDropdown: \"true\",\n      countryCodeEditable: \"false\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: \"2%\",\n        paddingRight: \"10%\",\n        paddingLeft: \"10%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      fullWidth: true,\n      disabled: this.state.disabled,\n      onClick: this.handleRedirectToPlaceOrderConfirmPage,\n      variant: \"contained\",\n      style: {\n        padding: \"2%\",\n        fontSize: 20,\n        color: \"white\",\n        backgroundColor: this.state.disabled ? \"grey\" : \"green\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }\n    }, \"Place Order\"))))));\n  }\n\n}\n\nexport default OrderConfirmationPage;","map":{"version":3,"sources":["/Users/kendric_chung/Projects/kingdo/src/Components/Checkout/OrderConfirmationPage.js"],"names":["React","Component","TopBar","Typography","TextField","Button","PhoneInput","Redirect","Link","Card","CardContent","Center","Axios","Helmet","hostEndpoint","process","env","KINGDO_HOST_ENDPOINT","OrderConfirmationPage","constructor","props","handleFirstNameEdit","event","setState","firstNameText","target","value","disabled","length","state","lastNameText","phoneNumber","handleLastNameEdit","handlePhoneNumberEdit","replace","handleRedirectToPlaceOrderConfirmPage","headers","params","customerPhoneNumber","data","cartItems","JSON","parse","sessionStorage","getItem","then","response","removeItem","error","console","log","redirectToPlaceOrderConfirmPage","token","location","foodTransportationMethod","render","pathname","padding","paddingRight","paddingLeft","fontSize","paddingBottom","width","height","backgroundColor","paddingTop","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport TopBar from \"../Menu/MenuPage/TopBar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport PhoneInput from \"material-ui-phone-number\";\nimport { Redirect, Link } from \"react-router-dom\";\nimport Card from \"@material-ui/core/Card\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Center from \"react-center\";\nimport Axios from \"axios\";\nimport { Helmet } from \"react-helmet\";\n\nconst hostEndpoint = process.env.KINGDO_HOST_ENDPOINT\n  ? process.env.KINGDO_HOST_ENDPOINT\n  : \"http://localhost:3001\";\n\nclass OrderConfirmationPage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      firstNameText: \"\",\n      lastNameText: \"\",\n      phoneNumber: \"\",\n      token: props.location.state,\n      foodTransportationMethod: props.location.foodTransportationMethod,\n      disabled: true,\n      redirectToPlaceOrderConfirmPage: false,\n    };\n  }\n\n  handleFirstNameEdit = (event) => {\n    this.setState({\n      firstNameText: event.target.value,\n      disabled:\n        event.target.value.length === 0 ||\n        this.state.lastNameText.length === 0 ||\n        this.state.phoneNumber.length === 0,\n    });\n  };\n\n  handleLastNameEdit = (event) => {\n    this.setState({\n      lastNameText: event.target.value,\n      disabled:\n        event.target.value.length === 0 ||\n        this.state.firstNameText.length === 0 ||\n        this.state.phoneNumber.length === 0,\n    });\n  };\n\n  handlePhoneNumberEdit = (value) => {\n    this.setState({\n      phoneNumber: value.replace(/\\(|\\)|-|\\s/g, \"\"),\n      disabled:\n        value.length === 0 ||\n        this.state.lastNameText.length === 0 ||\n        this.state.firstNameText.length === 0,\n    });\n  };\n\n  handleRedirectToPlaceOrderConfirmPage = () => {\n    try {\n      Axios(`${hostEndpoint}/twilio/sms`, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"Access-Control-Allow-Origin\": \"*\",\n        },\n        params: { customerPhoneNumber: this.state.phoneNumber },\n        data: { cartItems: JSON.parse(sessionStorage.getItem(\"cartItems\")) },\n      }).then((response) => sessionStorage.removeItem(\"cartItems\"));\n      // TODO: need to check if number of valid if not show that they need to pick up on next screen\n    } catch (error) {\n      console.log(error);\n    }\n    this.setState({ redirectToPlaceOrderConfirmPage: true });\n  };\n\n  render() {\n    if (!this.state.token) {\n      return (\n        <Center>\n          <h1>\n            Please return to the main page <Link to=\"/\">here</Link>.\n          </h1>\n        </Center>\n      );\n    }\n\n    if (this.state.redirectToPlaceOrderConfirmPage) {\n      return (\n        <Redirect\n          to={{\n            pathname: `/${this.state.foodTransportationMethod}/cart/order/confirmed/checkout`,\n            state: \"token\",\n            phoneNumber: this.state.phoneNumber,\n          }}\n        />\n      );\n    }\n\n    return (\n      <div>\n        <Helmet>\n          <title>King Do Restaurant | Order Confirm</title>\n        </Helmet>\n        <TopBar />\n        <div style={{ padding: \"2%\", paddingRight: \"5%\", paddingLeft: \"5%\" }}>\n          <Card>\n            <CardContent>\n              <div\n                style={{\n                  padding: \"2%\",\n                }}\n              >\n                <Typography component=\"h2\" style={{ fontSize: 20 }}>\n                  Please fill in the following to confirm that you will be\n                  picking up the order.\n                </Typography>\n                <Typography\n                  component=\"h2\"\n                  style={{ fontSize: 20, paddingBottom: \"2%\" }}\n                >\n                  Your payment will be received upon pick up.\n                </Typography>\n                <div\n                  style={{ width: \"100%\", height: 1, backgroundColor: \"black\" }}\n                ></div>\n                <Typography\n                  component=\"h2\"\n                  style={{ fontSize: 20, paddingTop: \"2%\" }}\n                >\n                  First Name\n                </Typography>\n                <TextField\n                  fullWidth\n                  variant=\"outlined\"\n                  style={{ paddingBottom: 10 }}\n                  onChange={this.handleFirstNameEdit}\n                />\n                <Typography component=\"h2\" style={{ fontSize: 20 }}>\n                  Last Name\n                </Typography>\n                <TextField\n                  fullWidth\n                  variant=\"outlined\"\n                  style={{ paddingBottom: 10 }}\n                  onChange={this.handleLastNameEdit}\n                />\n                <Typography component=\"h2\" style={{ fontSize: 20 }}>\n                  Phone Number\n                </Typography>\n                <PhoneInput\n                  fullWidth\n                  style={{ height: \"40px\", paddingTop: \"5px\" }}\n                  onChange={this.handlePhoneNumberEdit}\n                  defaultCountry=\"ca\"\n                  disableDropdown=\"true\"\n                  countryCodeEditable=\"false\"\n                />\n              </div>\n              <div\n                style={{\n                  padding: \"2%\",\n                  paddingRight: \"10%\",\n                  paddingLeft: \"10%\",\n                }}\n              >\n                <Button\n                  fullWidth\n                  disabled={this.state.disabled}\n                  onClick={this.handleRedirectToPlaceOrderConfirmPage}\n                  variant=\"contained\"\n                  style={{\n                    padding: \"2%\",\n                    fontSize: 20,\n                    color: \"white\",\n                    backgroundColor: this.state.disabled ? \"grey\" : \"green\",\n                  }}\n                >\n                  Place Order\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default OrderConfirmationPage;\n"]},"metadata":{},"sourceType":"module"}