{"ast":null,"code":"var _jsxFileName = \"/Users/kendric_chung/Projects/kingdo/src/Components/Cart/CartPage.js\";\nimport React, { Component } from \"react\";\nimport TopBar from \"../Menu/MenuPage/TopBar\";\nimport ScrollToTop from \"react-scroll-to-top\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { Redirect } from \"react-router-dom\";\n\nclass CartPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleRedirectToOrderConfirmationPage = () => {\n      this.setState({\n        redirectToOrderConfirmationPage: true\n      });\n    };\n\n    this.handleRemoveItems = itemId => {\n      let currentStackItems = this.state.itemStack;\n      let currentCartItems = this.state.cartItems; // This creates the new stack of items\n\n      let newStackItems = [];\n      currentStackItems.forEach(value => {\n        if (value.item.id !== itemId) {\n          newStackItems.push(value);\n        }\n      }); // This creates the new cart items\n\n      let newCartItems = [];\n      currentCartItems.forEach(value => {\n        if (value.id !== itemId) {\n          newCartItems.push(value);\n        }\n      }); // Set to session storage\n\n      sessionStorage.setItem(\"cartItems\", JSON.stringify(newCartItems)); // Calculate the new amounts\n\n      const [subtotalPrice, taxPrice, totalPrice] = this.calculateAmountsGivenStackItems(newStackItems);\n      this.setState({\n        itemStack: newStackItems,\n        cartItems: newCartItems,\n        subtotalPrice: subtotalPrice,\n        taxPrice: taxPrice,\n        totalPrice: totalPrice\n      });\n    };\n\n    this.handleChangeQuantity = (item, newQuantity, oldQuantity) => {\n      if (item && newQuantity && oldQuantity) {\n        let currentCartItems = this.state.cartItems;\n        let currentStackItems = this.state.itemStack;\n        let newCartItems = [];\n        let numberOfItemsLeft = oldQuantity - newQuantity;\n\n        if (numberOfItemsLeft > 0) {\n          let numberOfItemsToRemove = numberOfItemsLeft;\n\n          for (let i = 0; i < currentCartItems.length; i++) {\n            if (currentCartItems[i].id === item.id && numberOfItemsToRemove > 0) {\n              delete currentCartItems[i];\n              numberOfItemsToRemove--;\n            }\n          }\n\n          currentCartItems.forEach(value => {\n            if (value !== null) {\n              newCartItems.push(value);\n            }\n          });\n        } else if (numberOfItemsLeft < 0) {\n          let numberToAdd = Math.abs(numberOfItemsLeft);\n          newCartItems = currentCartItems;\n\n          for (let i = 0; i < numberToAdd; i++) {\n            newCartItems.push(item);\n          }\n        }\n\n        currentStackItems.forEach(value => {\n          if (value.item.id === item.id) {\n            if (numberOfItemsLeft > 0) {\n              value.quantity -= numberOfItemsLeft;\n            } else {\n              value.quantity += Math.abs(numberOfItemsLeft);\n            }\n          }\n        });\n        const [subtotalPrice, taxPrice, totalPrice] = this.calculateAmountsGivenStackItems(currentStackItems);\n        this.setState({\n          itemStack: currentStackItems,\n          cartItems: newCartItems,\n          subtotalPrice: subtotalPrice,\n          taxPrice: taxPrice,\n          totalPrice: totalPrice\n        });\n      }\n    };\n\n    let map = new Map();\n    const storageCartItems = JSON.parse(sessionStorage.getItem(\"cartItems\")) ? JSON.parse(sessionStorage.getItem(\"cartItems\")) : [];\n\n    for (const item of storageCartItems) {\n      if (!map.has(item.id)) {\n        map.set(item.id, [item]);\n      } else {\n        let listOfItemsWithGivenId = map.get(item.id);\n        listOfItemsWithGivenId.push(item);\n        map.set(item.id, listOfItemsWithGivenId);\n      }\n    }\n\n    let listOfItems = [];\n    map.forEach((value, key) => {\n      listOfItems.push({\n        quantity: value.length,\n        item: value[0]\n      });\n    });\n    let price = 0;\n    listOfItems.forEach(value => {\n      price += value.quantity * parseFloat((Math.round(parseFloat(value.item.price, 10) * 100) / 100).toFixed(2));\n    });\n\n    const _subtotalPrice = parseFloat((Math.round(parseFloat(price, 10) * 100) / 100).toFixed(2));\n\n    const _taxPrice = parseFloat((Math.round(_subtotalPrice * 0.05 * 100) / 100).toFixed(2));\n\n    const _totalPrice = parseFloat((Math.round(parseFloat(_subtotalPrice + _taxPrice, 10) * 100) / 100).toFixed(2));\n\n    this.state = {\n      cartItems: storageCartItems,\n      itemStack: listOfItems,\n      subtotalPrice: _subtotalPrice,\n      taxPrice: _taxPrice,\n      totalPrice: _totalPrice,\n      foodTransportationMethod: props.location.pathname.includes(\"delivery\") ? \"delivery\" : \"pickup\",\n      redirectToOrderConfirmationPage: false,\n      buttonDisabled: storageCartItems.length === 0 ? true : false\n    };\n  }\n\n  calculateAmountsGivenStackItems(stackItems) {\n    let price = 0;\n    stackItems.forEach(value => {\n      price += value.quantity * parseFloat((Math.round(parseFloat(value.item.price, 10) * 100) / 100).toFixed(2));\n    });\n    const subtotalPrice = parseFloat((Math.round(parseFloat(price, 10) * 100) / 100).toFixed(2));\n    const taxPrice = parseFloat((Math.round(subtotalPrice * 0.05 * 100) / 100).toFixed(2));\n    const totalPrice = parseFloat((Math.round(parseFloat(subtotalPrice + taxPrice, 10) * 100) / 100).toFixed(2));\n    return [subtotalPrice, taxPrice, totalPrice];\n  }\n\n  render() {\n    if (this.state.redirectToOrderConfirmationPage) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        push: true,\n        to: {\n          pathname: `/${this.state.foodTransportationMethod}/cart/order/confirmed`,\n          state: \"token\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 9\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(ScrollToTop, {\n      smooth: true,\n      style: {\n        position: \"fixed\",\n        bottom: \"11%\",\n        left: \"47.5%\",\n        width: \"6%\",\n        height: \"6%\",\n        borderStyle: \"solid\",\n        borderWidth: 1,\n        borderColor: \"#83858a\"\n      },\n      component: /*#__PURE__*/React.createElement(\"h4\", {\n        style: {\n          fontSize: 14\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 22\n        }\n      }, \"Back to Top\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(TopBar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 11\n      }\n    }, this.state.itemStack.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: 40\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      component: \"h2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 17\n      }\n    }, \"You currently don't have any items in your cart.\"), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      component: \"h2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 17\n      }\n    }, \"Please add them from the menu page to proceed to checkout.\")) : this.state.itemStack.map(value => /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: \"13%\",\n        width: \"200%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(CardContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      component: \"h2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 23\n      }\n    }, value.item.name), /*#__PURE__*/React.createElement(Typography, {\n      color: \"textSecondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 23\n      }\n    }, \"$\", value.item.price), /*#__PURE__*/React.createElement(Typography, {\n      color: \"textSecondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 23\n      }\n    }, \"Quantity:\"), /*#__PURE__*/React.createElement(TextField, {\n      type: \"number\",\n      variant: \"outlined\",\n      size: \"small\",\n      InputProps: {\n        inputProps: {\n          min: 0\n        }\n      },\n      onChange: event => this.handleChangeQuantity(value.item, parseInt(event.target.value, 10), value.quantity),\n      defaultValue: value.quantity,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(CardActions, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      size: \"small\",\n      color: \"secondary\",\n      onClick: () => this.handleRemoveItems(value.item.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 23\n      }\n    }, \"Remove Item\")))))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: \"45%\",\n        position: \"fixed\",\n        right: 0,\n        padding: 40\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(CardContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      component: \"h2\",\n      style: {\n        fontSize: 40\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 17\n      }\n    }, \"Order Summary\"), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        padding: \"10%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 21\n      }\n    }, \"Items:\"), /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 21\n      }\n    }, this.state.cartItems.length)), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 21\n      }\n    }, \"Subtotal:\"), /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 308,\n        columnNumber: 21\n      }\n    }, \"$\", this.state.subtotalPrice)), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 21\n      }\n    }, \"Tax (GST):\"), /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 30\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 21\n      }\n    }, \"$\", this.state.taxPrice)), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        paddingTop: 20,\n        paddingBottom: 20\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: \"100%\",\n        height: 2,\n        backgroundColor: \"black\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 40\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 21\n      }\n    }, \"Total:\"), /*#__PURE__*/React.createElement(Typography, {\n      component: \"h2\",\n      style: {\n        fontSize: 40\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 21\n      }\n    }, \"$\", this.state.totalPrice)))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        padding: \"2%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      fullWidth: true,\n      disabled: this.state.buttonDisabled,\n      onClick: this.handleRedirectToOrderConfirmationPage,\n      variant: \"contained\",\n      style: {\n        padding: \"2%\",\n        fontSize: 20,\n        color: \"white\",\n        backgroundColor: this.state.buttonDisabled ? \"grey\" : \"green\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 17\n      }\n    }, \"Confirm Order\"))))));\n  }\n\n}\n\nexport default CartPage;","map":{"version":3,"sources":["/Users/kendric_chung/Projects/kingdo/src/Components/Cart/CartPage.js"],"names":["React","Component","TopBar","ScrollToTop","Card","CardActions","CardContent","Button","TextField","Typography","Redirect","CartPage","constructor","props","handleRedirectToOrderConfirmationPage","setState","redirectToOrderConfirmationPage","handleRemoveItems","itemId","currentStackItems","state","itemStack","currentCartItems","cartItems","newStackItems","forEach","value","item","id","push","newCartItems","sessionStorage","setItem","JSON","stringify","subtotalPrice","taxPrice","totalPrice","calculateAmountsGivenStackItems","handleChangeQuantity","newQuantity","oldQuantity","numberOfItemsLeft","numberOfItemsToRemove","i","length","numberToAdd","Math","abs","quantity","map","Map","storageCartItems","parse","getItem","has","set","listOfItemsWithGivenId","get","listOfItems","key","price","parseFloat","round","toFixed","foodTransportationMethod","location","pathname","includes","buttonDisabled","stackItems","render","position","bottom","left","width","height","borderStyle","borderWidth","borderColor","fontSize","display","padding","name","inputProps","min","event","parseInt","target","right","justifyContent","paddingTop","paddingBottom","backgroundColor","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport TopBar from \"../Menu/MenuPage/TopBar\";\nimport ScrollToTop from \"react-scroll-to-top\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { Redirect } from \"react-router-dom\";\n\nclass CartPage extends Component {\n  constructor(props) {\n    super(props);\n    let map = new Map();\n    const storageCartItems = JSON.parse(sessionStorage.getItem(\"cartItems\"))\n      ? JSON.parse(sessionStorage.getItem(\"cartItems\"))\n      : [];\n    for (const item of storageCartItems) {\n      if (!map.has(item.id)) {\n        map.set(item.id, [item]);\n      } else {\n        let listOfItemsWithGivenId = map.get(item.id);\n        listOfItemsWithGivenId.push(item);\n        map.set(item.id, listOfItemsWithGivenId);\n      }\n    }\n\n    let listOfItems = [];\n    map.forEach((value, key) => {\n      listOfItems.push({\n        quantity: value.length,\n        item: value[0],\n      });\n    });\n\n    let price = 0;\n    listOfItems.forEach((value) => {\n      price +=\n        value.quantity *\n        parseFloat(\n          (Math.round(parseFloat(value.item.price, 10) * 100) / 100).toFixed(2)\n        );\n    });\n\n    const subtotalPrice = parseFloat(\n      (Math.round(parseFloat(price, 10) * 100) / 100).toFixed(2)\n    );\n    const taxPrice = parseFloat(\n      (Math.round(subtotalPrice * 0.05 * 100) / 100).toFixed(2)\n    );\n\n    const totalPrice = parseFloat(\n      (\n        Math.round(parseFloat(subtotalPrice + taxPrice, 10) * 100) / 100\n      ).toFixed(2)\n    );\n    this.state = {\n      cartItems: storageCartItems,\n      itemStack: listOfItems,\n      subtotalPrice: subtotalPrice,\n      taxPrice: taxPrice,\n      totalPrice: totalPrice,\n      foodTransportationMethod: props.location.pathname.includes(\"delivery\")\n        ? \"delivery\"\n        : \"pickup\",\n      redirectToOrderConfirmationPage: false,\n      buttonDisabled: storageCartItems.length === 0 ? true : false,\n    };\n  }\n\n  handleRedirectToOrderConfirmationPage = () => {\n    this.setState({ redirectToOrderConfirmationPage: true });\n  };\n\n  calculateAmountsGivenStackItems(stackItems) {\n    let price = 0;\n    stackItems.forEach((value) => {\n      price +=\n        value.quantity *\n        parseFloat(\n          (Math.round(parseFloat(value.item.price, 10) * 100) / 100).toFixed(2)\n        );\n    });\n\n    const subtotalPrice = parseFloat(\n      (Math.round(parseFloat(price, 10) * 100) / 100).toFixed(2)\n    );\n    const taxPrice = parseFloat(\n      (Math.round(subtotalPrice * 0.05 * 100) / 100).toFixed(2)\n    );\n\n    const totalPrice = parseFloat(\n      (\n        Math.round(parseFloat(subtotalPrice + taxPrice, 10) * 100) / 100\n      ).toFixed(2)\n    );\n\n    return [subtotalPrice, taxPrice, totalPrice];\n  }\n\n  handleRemoveItems = (itemId) => {\n    let currentStackItems = this.state.itemStack;\n    let currentCartItems = this.state.cartItems;\n    // This creates the new stack of items\n    let newStackItems = [];\n    currentStackItems.forEach((value) => {\n      if (value.item.id !== itemId) {\n        newStackItems.push(value);\n      }\n    });\n    // This creates the new cart items\n    let newCartItems = [];\n    currentCartItems.forEach((value) => {\n      if (value.id !== itemId) {\n        newCartItems.push(value);\n      }\n    });\n    // Set to session storage\n    sessionStorage.setItem(\"cartItems\", JSON.stringify(newCartItems));\n\n    // Calculate the new amounts\n    const [\n      subtotalPrice,\n      taxPrice,\n      totalPrice,\n    ] = this.calculateAmountsGivenStackItems(newStackItems);\n\n    this.setState({\n      itemStack: newStackItems,\n      cartItems: newCartItems,\n      subtotalPrice: subtotalPrice,\n      taxPrice: taxPrice,\n      totalPrice: totalPrice,\n    });\n  };\n\n  handleChangeQuantity = (item, newQuantity, oldQuantity) => {\n    if (item && newQuantity && oldQuantity) {\n      let currentCartItems = this.state.cartItems;\n      let currentStackItems = this.state.itemStack;\n      let newCartItems = [];\n      let numberOfItemsLeft = oldQuantity - newQuantity;\n\n      if (numberOfItemsLeft > 0) {\n        let numberOfItemsToRemove = numberOfItemsLeft;\n        for (let i = 0; i < currentCartItems.length; i++) {\n          if (currentCartItems[i].id === item.id && numberOfItemsToRemove > 0) {\n            delete currentCartItems[i];\n            numberOfItemsToRemove--;\n          }\n        }\n        currentCartItems.forEach((value) => {\n          if (value !== null) {\n            newCartItems.push(value);\n          }\n        });\n      } else if (numberOfItemsLeft < 0) {\n        let numberToAdd = Math.abs(numberOfItemsLeft);\n        newCartItems = currentCartItems;\n        for (let i = 0; i < numberToAdd; i++) {\n          newCartItems.push(item);\n        }\n      }\n\n      currentStackItems.forEach((value) => {\n        if (value.item.id === item.id) {\n          if (numberOfItemsLeft > 0) {\n            value.quantity -= numberOfItemsLeft;\n          } else {\n            value.quantity += Math.abs(numberOfItemsLeft);\n          }\n        }\n      });\n\n      const [\n        subtotalPrice,\n        taxPrice,\n        totalPrice,\n      ] = this.calculateAmountsGivenStackItems(currentStackItems);\n\n      this.setState({\n        itemStack: currentStackItems,\n        cartItems: newCartItems,\n        subtotalPrice: subtotalPrice,\n        taxPrice: taxPrice,\n        totalPrice: totalPrice,\n      });\n    }\n  };\n\n  render() {\n    if (this.state.redirectToOrderConfirmationPage) {\n      return (\n        <Redirect\n          push\n          to={{\n            pathname: `/${this.state.foodTransportationMethod}/cart/order/confirmed`,\n            state: \"token\",\n          }}\n        />\n      );\n    }\n\n    return (\n      <div>\n        <ScrollToTop\n          smooth\n          style={{\n            position: \"fixed\",\n            bottom: \"11%\",\n            left: \"47.5%\",\n            width: \"6%\",\n            height: \"6%\",\n            borderStyle: \"solid\",\n            borderWidth: 1,\n            borderColor: \"#83858a\",\n          }}\n          component={<h4 style={{ fontSize: 14 }}>Back to Top</h4>}\n        />\n        <TopBar />\n        <div style={{ display: \"flex\" }}>\n          <div>\n            {this.state.itemStack.length === 0 ? (\n              <div style={{ padding: 40 }}>\n                <Typography variant=\"h5\" component=\"h2\">\n                  You currently don't have any items in your cart.\n                </Typography>\n                <Typography variant=\"h5\" component=\"h2\">\n                  Please add them from the menu page to proceed to checkout.\n                </Typography>\n              </div>\n            ) : (\n              this.state.itemStack.map((value) => (\n                <div style={{ padding: \"13%\", width: \"200%\" }}>\n                  <Card>\n                    <CardContent>\n                      <Typography variant=\"h5\" component=\"h2\">\n                        {value.item.name}\n                      </Typography>\n                      <Typography color=\"textSecondary\">\n                        ${value.item.price}\n                      </Typography>\n                      <Typography color=\"textSecondary\">Quantity:</Typography>\n                      <TextField\n                        type=\"number\"\n                        variant=\"outlined\"\n                        size=\"small\"\n                        InputProps={{ inputProps: { min: 0 } }}\n                        onChange={(event) =>\n                          this.handleChangeQuantity(\n                            value.item,\n                            parseInt(event.target.value, 10),\n                            value.quantity\n                          )\n                        }\n                        defaultValue={value.quantity}\n                      />\n                    </CardContent>\n                    <CardActions>\n                      <Button\n                        size=\"small\"\n                        color=\"secondary\"\n                        onClick={() => this.handleRemoveItems(value.item.id)}\n                      >\n                        Remove Item\n                      </Button>\n                    </CardActions>\n                  </Card>\n                </div>\n              ))\n            )}\n          </div>\n          <div\n            style={{\n              width: \"45%\",\n              position: \"fixed\",\n              right: 0,\n              padding: 40,\n            }}\n          >\n            <Card>\n              <CardContent>\n                <Typography\n                  variant=\"h5\"\n                  component=\"h2\"\n                  style={{ fontSize: 40 }}\n                >\n                  Order Summary\n                </Typography>\n                <span style={{ padding: \"10%\" }}>\n                  <div\n                    style={{ display: \"flex\", justifyContent: \"space-between\" }}\n                  >\n                    <Typography component=\"h2\" style={{ fontSize: 30 }}>\n                      Items:\n                    </Typography>\n                    <Typography component=\"h2\" style={{ fontSize: 30 }}>\n                      {this.state.cartItems.length}\n                    </Typography>\n                  </div>\n                  <div\n                    style={{ display: \"flex\", justifyContent: \"space-between\" }}\n                  >\n                    <Typography component=\"h2\" style={{ fontSize: 30 }}>\n                      Subtotal:\n                    </Typography>\n                    <Typography component=\"h2\" style={{ fontSize: 30 }}>\n                      ${this.state.subtotalPrice}\n                    </Typography>\n                  </div>\n                  <div\n                    style={{ display: \"flex\", justifyContent: \"space-between\" }}\n                  >\n                    <Typography component=\"h2\" style={{ fontSize: 30 }}>\n                      Tax (GST):\n                    </Typography>\n                    <Typography component=\"h2\" style={{ fontSize: 30 }}>\n                      ${this.state.taxPrice}\n                    </Typography>\n                  </div>\n                  <div style={{ paddingTop: 20, paddingBottom: 20 }}>\n                    <div\n                      style={{\n                        width: \"100%\",\n                        height: 2,\n                        backgroundColor: \"black\",\n                      }}\n                    ></div>\n                  </div>\n                  <div\n                    style={{ display: \"flex\", justifyContent: \"space-between\" }}\n                  >\n                    <Typography component=\"h2\" style={{ fontSize: 40 }}>\n                      Total:\n                    </Typography>\n                    <Typography component=\"h2\" style={{ fontSize: 40 }}>\n                      ${this.state.totalPrice}\n                    </Typography>\n                  </div>\n                </span>\n              </CardContent>\n              <div style={{ padding: \"2%\" }}>\n                <Button\n                  fullWidth\n                  disabled={this.state.buttonDisabled}\n                  onClick={this.handleRedirectToOrderConfirmationPage}\n                  variant=\"contained\"\n                  style={{\n                    padding: \"2%\",\n                    fontSize: 20,\n                    color: \"white\",\n                    backgroundColor: this.state.buttonDisabled\n                      ? \"grey\"\n                      : \"green\",\n                  }}\n                >\n                  Confirm Order\n                </Button>\n              </div>\n            </Card>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default CartPage;\n"]},"metadata":{},"sourceType":"module"}